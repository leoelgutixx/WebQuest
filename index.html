<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebQuest: El Coraz√≥n de la Computaci√≥n</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" href="https://example.com/favicon.ico" type="image/x-icon">
    <meta name="description" content="WebQuest sobre la M√°quina de Turing, su funcionamiento y simulaci√≥n interactiva. Aprende a dise√±ar y probar tu propia m√°quina para reconocer pal√≠ndromos binarios.">
    <meta name="keywords" content="M√°quina de Turing, WebQuest, Computaci√≥n, Simulaci√≥n, Pal√≠ndromos, Algoritmos, Educaci√≥n">
    <meta name="author" content="Leonardo Gutierrez y Jose Corobo">
    <meta name="theme-color" content="#4A90E2">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
      <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8f9fa; }
        .tape-cell {
            min-width: 45px;
            height: 45px;
            border: 1px solid #dee2e6;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.25rem;
            font-weight: 600;
            color: #495057;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }
        .tape-head {
            border-bottom: 4px solid #0d6efd;
            transform: scale(1.1);
            background-color: #e7f5ff;
        }
        .anatomy-card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .anatomy-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.1);
        }
        .rule-table td, .rule-table th { padding: 0.75rem; border: 1px solid #e9ecef; text-align: center; }
        .rule-highlight { background-color: #ffc; }
    </style>
</head>
<body class="text-gray-800">

    <header class="sticky top-0 bg-white/90 backdrop-blur-lg z-20 shadow-md">
        <nav class="container mx-auto px-6 py-4">
            <ul class="flex justify-center space-x-5 md:space-x-10 text-base">
                <li><a href="#introduccion" class="text-gray-700 hover:text-blue-600 font-semibold transition">Introducci√≥n</a></li>
                <li><a href="#anatomia" class="text-gray-700 hover:text-blue-600 font-semibold transition">Anatom√≠a</a></li>
                <li><a href="#logica" class="text-gray-700 hover:text-blue-600 font-semibold transition">L√≥gica</a></li>
                <li><a href="#simulador" class="text-gray-700 hover:text-blue-600 font-semibold transition">Simulador</a></li>
                <li><a href="#recursos" class="text-gray-700 hover:text-blue-600 font-semibold transition">Recursos</a></li>
            </ul>
        </nav>
    </header>

    <main class="container mx-auto px-6 py-10 md:py-16">
        
        <section id="introduccion" class="text-center mb-20 scroll-mt-24">
            <h1 class="text-4xl md:text-6xl font-bold text-gray-900 mb-4">M√°quinas de Turing</h1>
            <p class="text-lg md:text-xl text-gray-600 max-w-4xl mx-auto">Un viaje al coraz√≥n de la computaci√≥n te√≥rica.</p>
            <div class="mt-10 text-left bg-white p-8 rounded-xl shadow-lg max-w-4xl mx-auto border border-gray-200">
                <h2 class="text-2xl font-bold mb-4 text-gray-800 text-center">El Modelo que lo cambi√≥ todo</h2>
                <p class="text-gray-700 leading-relaxed">
                    Antes de que existiera el primer computador, Alan Turing imagin√≥ un dispositivo de simplicidad radical: una <strong>M√°quina de Turing</strong>. No era una m√°quina f√≠sica, sino un modelo matem√°tico que define qu√© significa "computar". Compuesta por una cinta infinita, un cabezal lector/escritor y un conjunto de reglas, esta idea sent√≥ las bases para la era digital, demostrando que cualquier problema computable podr√≠a, en teor√≠a, ser resuelto por esta m√°quina universal. Aqu√≠ exploraremos su funcionamiento y veremos su elegancia en acci√≥n.
                </p>
            </div>
        </section>

        <section id="anatomia" class="mb-20 scroll-mt-24">
            <h2 class="text-4xl font-bold text-center mb-12 text-gray-900">Anatom√≠a de una M√°quina</h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto">
                <div class="anatomy-card">
                    <div class="text-4xl mb-4">üìú</div>
                    <h3 class="text-xl font-bold mb-2">La Cinta</h3>
                    <p class="text-gray-600">Es la memoria de la m√°quina. Una tira de papel te√≥ricamente infinita, dividida en celdas. Cada celda contiene un s√≠mbolo o est√° en blanco.</p>
                </div>
                <div class="anatomy-card">
                    <div class="text-4xl mb-4">üëá</div>
                    <h3 class="text-xl font-bold mb-2">El Cabezal</h3>
                    <p class="text-gray-600">El √∫nico componente activo. Puede leer el s√≠mbolo en la celda actual, escribir un nuevo s√≠mbolo y moverse una celda a la izquierda o a la derecha.</p>
                </div>
                <div class="anatomy-card">
                    <div class="text-4xl mb-4">üö¶</div>
                    <h3 class="text-xl font-bold mb-2">Los Estados</h3>
                    <p class="text-gray-600">Son como los "modos" o la "memoria interna" de la m√°quina. En cualquier momento, la m√°quina est√° en un estado espec√≠fico (ej. "buscando un 1", "retrocediendo").</p>
                </div>
                <div class="anatomy-card">
                    <div class="text-4xl mb-4">üî§</div>
                    <h3 class="text-xl font-bold mb-2">El Alfabeto</h3>
                    <p class="text-gray-600">El conjunto finito de s√≠mbolos que la m√°quina entiende y puede escribir en la cinta. Incluye los s√≠mbolos de entrada y el s√≠mbolo en blanco.</p>
                </div>
                <div class="anatomy-card col-span-1 md:col-span-2 lg:col-span-2">
                    <div class="text-4xl mb-4">üß†</div>
                    <h3 class="text-xl font-bold mb-2">La Funci√≥n de Transici√≥n</h3>
                    <p class="text-gray-600">El "programa" o el cerebro de la m√°quina. Es un conjunto de reglas que le dicen qu√© hacer. Cada regla se basa en el estado actual y el s√≠mbolo que est√° leyendo, y define: a qu√© nuevo estado pasar, qu√© s√≠mbolo escribir y hacia d√≥nde moverse.</p>
                </div>
            </div>
        </section>

        <section id="logica" class="mb-20 scroll-mt-24">
            <h2 class="text-4xl font-bold text-center mb-12 text-gray-900">La L√≥gica en Acci√≥n</h2>
            <div class="bg-white p-8 rounded-xl shadow-lg max-w-5xl mx-auto border border-gray-200">
                <p class="text-gray-700 leading-relaxed mb-6">
                    El "programa" de una M√°quina de Turing es su tabla de reglas o funci√≥n de transici√≥n. Para nuestro ejemplo de reconocer pal√≠ndromos (cadenas como `10101`), la m√°quina sigue una l√≥gica espec√≠fica. A continuaci√≥n se muestra una parte de esa tabla. Cada fila es una instrucci√≥n:
                </p>
                <p class="text-gray-700 leading-relaxed mb-6">
                    Por ejemplo, la primera regla `(q0, 0) ‚Üí (q1, x, R)` significa: "Si est√°s en el estado <strong>q0</strong> y lees un <strong>0</strong>, c√°mbialo por una <strong>x</strong>, mu√©vete a la <strong>Derecha</strong> y pasa al estado <strong>q1</strong>".
                </p>
                <div class="overflow-x-auto">
                    <table id="rule-table" class="w-full text-sm rule-table">
                        <thead class="bg-gray-100">
                            <tr><th>Estado Actual</th><th>S√≠mbolo Le√≠do</th><th>Nuevo Estado</th><th>S√≠mbolo a Escribir</th><th>Movimiento</th></tr>
                        </thead>
                        <tbody>
                            <tr data-rule="q0,0"><td>q0</td><td>0</td><td>q1</td><td>x</td><td>Derecha</td></tr>
                            <tr data-rule="q0,1"><td>q0</td><td>1</td><td>q2</td><td>x</td><td>Derecha</td></tr>
                            <tr data-rule="q1,0"><td>q1</td><td>0</td><td>q1</td><td>0</td><td>Derecha</td></tr>
                            <tr data-rule="q1,1"><td>q1</td><td>1</td><td>q1</td><td>1</td><td>Derecha</td></tr>
                            <tr data-rule="q1,_"><td>q1</td><td>_ (blanco)</td><td>q3</td><td>_</td><td>Izquierda</td></tr>
                            <tr data-rule="q3,0"><td>q3</td><td>0</td><td>q5</td><td>y</td><td>Izquierda</td></tr>
                            <tr data-rule="q5,x"><td>q5</td><td>x</td><td>q0</td><td>x</td><td>Derecha</td></tr>
                            <tr data-rule="q_accept,_"><td>q_accept</td><td>-</td><td colspan="3">HALT: ACEPTADO</td></tr>
                            <tr data-rule="q_reject,_"><td>q_reject</td><td>-</td><td colspan="3">HALT: RECHAZADO</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="simulador" class="mb-20 scroll-mt-24">
            <h2 class="text-4xl font-bold text-center mb-12 text-gray-900">Simulador Interactivo</h2>
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg max-w-6xl mx-auto border border-gray-200">
                <div class="grid lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-2">
                        <div class="flex flex-col sm:flex-row gap-4 mb-4">
                            <input type="text" id="tape-input" placeholder="Introduce una cadena de 0s y 1s" class="flex-grow p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <button id="load-tape-btn" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition font-semibold">Cargar Cinta</button>
                        </div>
                         <div class="flex flex-wrap gap-2 mb-6">
                            <span class="text-sm font-semibold mr-2">Ejemplos:</span>
                            <button class="preset-btn bg-gray-200 text-gray-700 px-3 py-1 rounded-full text-sm hover:bg-gray-300" data-value="101101">Pal√≠ndromo</button>
                            <button class="preset-btn bg-gray-200 text-gray-700 px-3 py-1 rounded-full text-sm hover:bg-gray-300" data-value="1010">No Pal√≠ndromo</button>
                            <button class="preset-btn bg-gray-200 text-gray-700 px-3 py-1 rounded-full text-sm hover:bg-gray-300" data-value="00">Simple</button>
                             <button class="preset-btn bg-gray-200 text-gray-700 px-3 py-1 rounded-full text-sm hover:bg-gray-300" data-value="">Vac√≠o</button>
                        </div>
                        <div id="simulator-display" class="w-full bg-gray-100 p-4 rounded-lg overflow-x-auto mb-4">
                            <div id="tape-container" class="flex justify-center"></div>
                        </div>
                        <div id="final-result" class="text-center text-3xl font-bold h-10"></div>
                    </div>
                    <div class="lg:col-span-1">
                        <h3 class="text-xl font-bold mb-4 text-center">Controles</h3>
                        <div class="flex flex-col space-y-3">
                             <button id="run-btn" class="w-full bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition disabled:bg-gray-400 font-semibold" disabled>‚ñ∂ Ejecutar</button>
                            <button id="step-btn" class="w-full bg-yellow-500 text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition disabled:bg-gray-400 font-semibold" disabled>‚èØ Paso</button>
                            <button id="reset-btn" class="w-full bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition disabled:bg-gray-400 font-semibold" disabled>‚èπ Reiniciar</button>
                        </div>
                        <div class="mt-4">
                            <label for="speed-slider" class="block text-sm font-semibold text-center mb-2">Velocidad</label>
                            <input type="range" id="speed-slider" min="50" max="1000" value="500" step="50" class="w-full">
                        </div>
                        <div id="status-display" class="mt-6 text-center font-mono p-4 rounded-lg bg-gray-800 text-white">
                            <div>Estado: <span id="current-state" class="font-bold text-yellow-300">N/A</span></div>
                            <div>Pasos: <span id="step-count" class="font-bold text-green-300">0</span></div>
                        </div>
                        <div id="rule-explanation" class="mt-4 p-4 rounded-lg bg-blue-50 border border-blue-200 h-32">
                            <h4 class="font-bold text-blue-900 mb-2 text-center">Regla Actual</h4>
                            <p class="text-sm text-blue-800 text-center">-</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="recursos" class="mb-20 scroll-mt-24">
            <h2 class="text-4xl font-bold text-center mb-12 text-gray-900">Recursos Adicionales</h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto">
                <a href="https://www.youtube.com/watch?v=iaXLDz_UeYY" target="_blank" class="block anatomy-card text-center">
                    <h3 class="font-semibold text-lg text-blue-800">üé• ¬øQu√© es una M√°quina de Turing?</h3>
                    <p class="text-gray-600 mt-2">Una excelente introducci√≥n visual de 5 minutos a los conceptos fundamentales.</p>
                </a>
                <a href="https://es.wikipedia.org/wiki/M%C3%A1quina_de_Turing" target="_blank" class="block anatomy-card text-center">
                    <h3 class="font-semibold text-lg text-blue-800">üìñ Art√≠culo de Wikipedia</h3>
                    <p class="text-gray-600 mt-2">Para una visi√≥n general completa de los componentes, la historia y la teor√≠a.</p>
                </a>
                <a href="https://turingmachinesimulator.com/" target="_blank" class="block anatomy-card text-center">
                    <h3 class="font-semibold text-lg text-blue-800">üõ†Ô∏è Simulador Avanzado</h3>
                    <p class="text-gray-600 mt-2">Un simulador online potente y f√°cil de usar para probar m√°quinas m√°s complejas.</p>
                </a>
            </div>
        </section>

        <section id="creadores" class="mb-20 scroll-mt-24">
            <h2 class="text-4xl font-bold text-center mb-12 text-gray-900">Creadores</h2>
            <div class="max-w-4xl mx-auto grid md:grid-cols-2 gap-12 text-center">
                <div>
                    <img src="https://drive.google.com/file/d/1-JzSsiA-ze17EqXR1Hki9rg0R3Jzm-uH/view?usp=sharing" class="w-36 h-36 rounded-full mx-auto mb-4 border-4 border-white shadow-lg" alt="Foto de Leonardo Gutierrez">
                    <h3 class="text-xl font-bold">Leonardo Gutierrez</h3>
                </div>
                <div>
                    <img src="https://drive.google.com/file/d/1srRUGhc5h9DcugkK-rA2IrpTKbQzPb7B/view?usp=sharing" class="w-36 h-36 rounded-full mx-auto mb-4 border-4 border-white shadow-lg" alt="Foto de Jose Corobo">
                    <h3 class="text-xl font-bold">Jose Corobo</h3>
                </div>
            </div>
        </section>

        <section id="informe" class="text-center mb-20 scroll-mt-24">
             <div class="bg-white p-8 rounded-xl shadow-lg max-w-2xl mx-auto border border-gray-200">
                <h2 class="text-3xl font-bold text-center mb-6 text-gray-900">Informe Detallado</h2>
                <p class="text-gray-700 leading-relaxed mb-6">
                    Para una exploraci√≥n m√°s profunda de la l√≥gica, los estados y las pruebas realizadas, pueden consultar nuestro informe t√©cnico completo.
                </p>
                <a href="https://docs.google.com/document/d/1esKzUSJtn_LRU8AmoAHF-e3UHsM4BMzILKnTt5U1sh4/edit?usp=sharing" class="inline-block bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition font-semibold text-lg">
                    Ver Informe Completo
                </a>
            </div>
        </section>

        <footer class="text-center pt-10 border-t border-gray-200">
            <p class="text-gray-600">Un explorador interactivo por <strong>Leonardo Gutierrez</strong> y <strong>Jose Corobo</strong>.</p>
        </footer>

    </main>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const tapeInput = document.getElementById('tape-input');
        const loadTapeBtn = document.getElementById('load-tape-btn');
        const tapeContainer = document.getElementById('tape-container');
        const currentStateSpan = document.getElementById('current-state');
        const stepCountSpan = document.getElementById('step-count');
        const finalResultDiv = document.getElementById('final-result');
        const runBtn = document.getElementById('run-btn');
        const stepBtn = document.getElementById('step-btn');
        const resetBtn = document.getElementById('reset-btn');
        const speedSlider = document.getElementById('speed-slider');
        const ruleExplanationP = document.querySelector('#rule-explanation p');
        const ruleTable = document.getElementById('rule-table');
        const presetBtns = document.querySelectorAll('.preset-btn');

        let machine = null;
        let initialTape = [];
        let simulationInterval = null;
        const BLANK = '_';

        const palindromeRules = {
            q0: {
                '0': { write: 'x', move: 'R', nextState: 'q1' },
                '1': { write: 'x', move: 'R', nextState: 'q2' },
                [BLANK]: { write: BLANK, move: 'S', nextState: 'q_accept' },
                'y': { write: 'y', move: 'R', nextState: 'q6' },
            },
            q1: { 
                '0': { write: '0', move: 'R', nextState: 'q1' },
                '1': { write: '1', move: 'R', nextState: 'q1' },
                'y': { write: 'y', move: 'R', nextState: 'q1' },
                [BLANK]: { write: BLANK, move: 'L', nextState: 'q3' },
            },
            q2: {
                '0': { write: '0', move: 'R', nextState: 'q2' },
                '1': { write: '1', move: 'R', nextState: 'q2' },
                'y': { write: 'y', move: 'R', nextState: 'q2' },
                [BLANK]: { write: BLANK, move: 'L', nextState: 'q4' },
            },
            q3: { 
                '0': { write: 'y', move: 'L', nextState: 'q5' },
                'x': { write: 'x', move: 'S', nextState: 'q_reject' },
                'y': { write: 'y', move: 'L', nextState: 'q3' },
                [BLANK]: { write: BLANK, move: 'S', nextState: 'q_reject' },
                '1': { write: '1', move: 'S', nextState: 'q_reject' },
            },
            q4: {
                '1': { write: 'y', move: 'L', nextState: 'q5' },
                'x': { write: 'x', move: 'S', nextState: 'q_reject' },
                'y': { write: 'y', move: 'L', nextState: 'q4' },
                [BLANK]: { write: BLANK, move: 'S', nextState: 'q_reject' },
                '0': { write: '0', move: 'S', nextState: 'q_reject' },
            },
            q5: {
                '0': { write: '0', move: 'L', nextState: 'q5' },
                '1': { write: '1', move: 'L', nextState: 'q5' },
                'y': { write: 'y', move: 'L', nextState: 'q5' },
                'x': { write: 'x', move: 'R', nextState: 'q0' },
            },
            q6: {
                'y': { write: 'y', move: 'R', nextState: 'q6' },
                [BLANK]: { write: BLANK, move: 'S', nextState: 'q_accept' },
            },
            q_accept: {},
            q_reject: {}
        };

        class TuringMachine {
            constructor(tape, rules) {
                this.tape = [BLANK, ...tape, BLANK];
                this.head = 1;
                this.state = 'q0';
                this.rules = rules;
                this.steps = 0;
                this.halted = false;
                this.lastRule = null;
            }

            step() {
                if (this.halted) return;
                
                const currentState = this.state;
                if (!this.rules[currentState]) {
                    this.halted = true;
                    this.lastRule = null;
                    return;
                }

                const currentSymbol = this.tape[this.head];
                const rule = this.rules[currentState][currentSymbol] || this.rules[currentState][BLANK];

                if (!rule) {
                    this.state = 'q_reject';
                    this.halted = true;
                    this.lastRule = null;
                    return;
                }
                
                this.lastRule = { state: currentState, symbol: currentSymbol };
                this.tape[this.head] = rule.write;
                
                if (rule.move === 'R') {
                    this.head++;
                    if (this.head === this.tape.length) this.tape.push(BLANK);
                } else if (rule.move === 'L') {
                    this.head--;
                    if (this.head < 0) {
                       this.tape.unshift(BLANK);
                       this.head = 0;
                    }
                }
                
                this.state = rule.nextState;
                this.steps++;

                if (this.state === 'q_accept' || this.state === 'q_reject') {
                    this.halted = true;
                }
            }
        }

        function renderTape() {
            if (!machine) return;
            tapeContainer.innerHTML = '';
            machine.tape.forEach((symbol, index) => {
                const cell = document.createElement('div');
                cell.className = 'tape-cell';
                cell.textContent = symbol;
                if (index === machine.head) {
                    cell.classList.add('tape-head');
                }
                tapeContainer.appendChild(cell);
            });
        }
        
        function updateStatus() {
            if (!machine) return;
            currentStateSpan.textContent = machine.state;
            stepCountSpan.textContent = machine.steps;

            // Highlight rule
            document.querySelectorAll('#rule-table tr').forEach(row => row.classList.remove('rule-highlight'));
            if (machine.lastRule) {
                const ruleKey = `${machine.lastRule.state},${machine.lastRule.symbol}`;
                const row = ruleTable.querySelector(`tr[data-rule="${ruleKey}"]`);
                if(row) row.classList.add('rule-highlight');
                
                const rule = machine.rules[machine.lastRule.state][machine.lastRule.symbol];
                if(rule) {
                    ruleExplanationP.textContent = `En estado ${machine.lastRule.state}, leyendo '${machine.lastRule.symbol}', escribe '${rule.write}', mueve ${rule.move === 'R' ? 'Derecha' : 'Izquierda'} y cambia a ${rule.nextState}.`;
                }
            } else {
                 ruleExplanationP.textContent = '-';
            }


            if (machine.halted) {
                clearInterval(simulationInterval);
                runBtn.disabled = true;
                stepBtn.disabled = true;
                resetBtn.disabled = false;
                if (machine.state === 'q_accept') {
                    finalResultDiv.textContent = '‚úÖ Cadena Aceptada';
                    finalResultDiv.className = 'text-center text-3xl font-bold h-10 text-green-600';
                    ruleExplanationP.textContent = '¬°√âxito! La m√°quina se detuvo en el estado de aceptaci√≥n.';
                } else {
                    finalResultDiv.textContent = '‚ùå Cadena Rechazada';
                    finalResultDiv.className = 'text-center text-3xl font-bold h-10 text-red-600';
                    ruleExplanationP.textContent = 'Fallo. La m√°quina se detuvo en el estado de rechazo o no encontr√≥ una regla v√°lida.';
                }
            }
        }

        function loadTape(value) {
            const input = value.trim();
            if (!/^[01]*$/.test(input)) {
                alert('Por favor, introduce solo 0s y 1s.');
                return;
            }
            initialTape = input.split('');
            resetMachine();
        }

        function resetMachine() {
            clearInterval(simulationInterval);
            machine = new TuringMachine([...initialTape], palindromeRules);
            renderTape();
            updateStatus();
            finalResultDiv.textContent = '';
            const hasTape = initialTape.length > 0 || machine.tape.length > 2;
            runBtn.disabled = !hasTape;
            stepBtn.disabled = !hasTape;
            resetBtn.disabled = false;
        }

        function runSimulation() {
            if (machine.halted) return;
            runBtn.disabled = true;
            stepBtn.disabled = true;
            resetBtn.disabled = true;
            const delay = 1050 - speedSlider.value;
            simulationInterval = setInterval(() => {
                if (!machine.halted) {
                    machine.step();
                    renderTape();
                    updateStatus();
                } else {
                    clearInterval(simulationInterval);
                    resetBtn.disabled = false;
                }
            }, delay);
        }

        function stepSimulation() {
            if (!machine.halted) {
                machine.step();
                renderTape();
                updateStatus();
            }
        }
        
        loadTapeBtn.addEventListener('click', () => loadTape(tapeInput.value));
        presetBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const value = btn.getAttribute('data-value');
                tapeInput.value = value;
                loadTape(value);
            })
        });

        runBtn.addEventListener('click', runSimulation);
        stepBtn.addEventListener('click', stepSimulation);
        resetBtn.addEventListener('click', resetMachine);

        // Initial state
        loadTape('101');

    });
    </script>
</body>
</html>
